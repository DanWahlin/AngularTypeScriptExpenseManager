{"version":3,"sources":["wc.directives/directives/menuHighlighter.directive.ts"],"names":["wc","wc.directives","wc.directives.MenuHighlighterDirective","wc.directives.MenuHighlighterDirective.constructor","wc.directives.MenuHighlighterDirective.instance","wc.directives.MenuHighlighterDirective._link","wc.directives.MenuHighlighterDirective._link.setActive"],"mappings":"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","file":"wc.directives/directives/menuHighlighter.directive.js","sourcesContent":["/*\n Thanks to Karl-Gustav for creating the autoActive directive\n to simplify highlighting <li> elements in a menu based on the path\n View the original version of the autoActive directive at\n https://github.com/Karl-Gustav/autoActive\n\n This version renames the directive and does some minor code restructuring and changes.\n */\n\n///<reference path=\"../../../../../tools/typings/tsd.d.ts\" />\n///<reference path=\"../../../../../tools/typings/expenseApp.d.ts\" />\n\n\nmodule wc.directives {\n  'use strict';\n\n    interface IMenuHighlighterScope extends ng.IScope {\n        highlightClassName: string;\n    }\n\n    class MenuHighlighterDirective implements ng.IDirective {\n\n        //Factory responsible for creating the directive instance\n        static $inject = ['$location'];\n        static instance($location: ng.ILocationService): ng.IDirective {\n            return new MenuHighlighterDirective($location);\n        }\n\n        restrict = 'A';\n        scope = {highlightClassName: '@'};\n        element = null;\n        //Link function definition\n        link: (scope: IMenuHighlighterScope, element: ng.IAugmentedJQuery) => void;\n\n        constructor (private $location: ng.ILocationService) {\n            this.link = this._link.bind(this);\n        }\n\n        _link(scope: IMenuHighlighterScope, element: ng.IAugmentedJQuery) {\n\n                var _this = this;\n\n                function setActive() {\n                    var path = _this.$location.path();\n                    var className = scope.highlightClassName || 'active';\n\n                    if (path) {\n                        angular.forEach(element.find('li'), (li) => {\n                            var anchor = li.querySelector('a');\n                            //Get href from href attribute or data-href in cases where href isn't used (such as login)\n                            var href = (anchor && anchor.href) ? anchor.href :\n                            anchor.getAttribute('data-href').replace('#', '');\n                            //Get value after hash\n                            var trimmedHref = href.substr(href.indexOf('#/') + 1, href.length);\n                            //Convert path to same length as trimmedHref\n                            var basePath = path.substr(0, trimmedHref.length);\n\n                            //See if trimmedHref and basePath match. If so, then highlight that item\n                            if (trimmedHref === basePath) {\n                                angular.element(li).addClass(className);\n                            } else {\n                                angular.element(li).removeClass(className);\n                            }\n                        });\n                    }\n                }\n\n                setActive();\n\n                //Monitor location changes\n                scope.$on('$locationChangeSuccess', setActive);\n        }\n    }\n\n    angular.module('wc.directives').directive('menuHighlighter', MenuHighlighterDirective.instance);\n}\n"],"sourceRoot":"/source/"}