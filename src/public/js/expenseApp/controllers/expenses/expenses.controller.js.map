{"version":3,"sources":["expenseApp/controllers/expenses/expenses.controller.ts"],"names":["expenseApp","expenseApp.expenses","expenseApp.expenses.ExpensesController","expenseApp.expenses.ExpensesController.constructor","expenseApp.expenses.ExpensesController.pageChanged","expenseApp.expenses.ExpensesController.searchTextChanged","expenseApp.expenses.ExpensesController.filterEmployeesExpenses","expenseApp.expenses.ExpensesController.pageRecords","expenseApp.expenses.ExpensesController.getEmployeesAndExpenses"],"mappings":"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","file":"expenseApp/controllers/expenses/expenses.controller.js","sourcesContent":["///<reference path=\"../../../../../../tools/typings/tsd.d.ts\" />\n///<reference path=\"../../../../../../tools/typings/expenseApp.d.ts\" />\n\nmodule expenseApp.expenses {\n    'use strict';\n\n    class ExpensesController {\n\n        employees = [];\n        filteredEmployees = [];\n        pagedEmployees = [];\n        filteredCount: number = 0;\n        searchText: string = null;\n\n        //paging\n        totalRecords: number = 0;\n        pageSize: number = 5;\n        currentPage: number = 1;\n        numRecordsDisplaying: number;\n\n        static $inject = ['$filter', '$window', 'expenseApp.services.dataService'];\n        constructor(private $filter: ng.IFilterService, private $window: ng.IWindowService,\n            private dataService: expenseApp.services.DataService) {\n            this.getEmployeesAndExpenses();\n        }\n\n        pageChanged(page) {\n            this.currentPage = page;\n            this.pageRecords();\n        }\n\n        searchTextChanged() {\n            this.filterEmployeesExpenses(this.searchText);\n        }\n\n        filterEmployeesExpenses(filterText) {\n            this.filteredEmployees = this.$filter('nameExpenseFilter')(this.employees, filterText);\n            this.filteredCount = this.filteredEmployees.length;\n\n            //Factor in paging\n            this.currentPage = 1;\n            this.totalRecords = this.filteredCount;\n            this.pageRecords();\n        }\n\n        pageRecords() {\n            var useFiltered = this.searchText && this.searchText.length > 0,\n                pageStart = (this.currentPage - 1) * this.pageSize,\n                pageEnd = pageStart + this.pageSize;\n\n            if (useFiltered) {\n                if (pageEnd > this.filteredCount) { pageEnd = this.filteredCount; }\n            } else {\n                if (pageEnd > this.employees.length) { pageEnd = this.employees.length; }\n                this.totalRecords = this.employees.length;\n            }\n\n            this.pagedEmployees = (useFiltered) ? this.filteredEmployees.slice(pageStart, pageEnd)\n                                                : this.employees.slice(pageStart, pageEnd);\n            this.numRecordsDisplaying = this.pagedEmployees.length;\n        }\n\n        getEmployeesAndExpenses() {\n            this.dataService.getEmployeesAndExpenses()\n                .then((employees: shared.IEmployee[]) => {\n                        this.totalRecords = employees.length;\n                        this.employees = employees;\n                        this.filterEmployeesExpenses('');\n                   }, (error) => {\n                        this.$window.alert(error.message);\n                });\n        }\n    }\n\n    angular.module('expenseApp').controller('expenseApp.expenses.ExpensesController', ExpensesController);\n\n}\n\n\n\n"],"sourceRoot":"/source/"}